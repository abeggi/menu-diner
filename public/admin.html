<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pannello di Controllo - Menu</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="admin-container">
        <div class="admin-header">
            <h2>Pannello di Amministrazione</h2>
            <div>
                <a href="/" class="btn btn-secondary" target="_blank">Vedi Menu Pubblico</a>
                <button id="logout-btn" class="btn btn-danger" style="margin-left: 10px;">Esci</button>
            </div>
        </div>

        <div class="admin-list">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3>Categorie</h3>
                <button class="btn btn-small" onclick="openCategoryModal()">+ Nuova Categoria</button>
            </div>
            <div id="categories-container">Caricamento...</div>
        </div>

        <div class="admin-list">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3>Piatti nel Menu</h3>
                <button class="btn btn-small" onclick="openItemModal()">+ Nuovo Piatto</button>
            </div>
            <div id="items-container">Caricamento...</div>
        </div>

        <div class="admin-list">
            <h3>Impostazioni Generali</h3>
            <form id="settings-form" style="margin-top: 1rem;">
                <div class="form-group">
                    <label>Titolo del Menu (es. Il Nostro Menu)</label>
                    <input type="text" id="menu-title" required>
                </div>
                <div class="form-group">
                    <label>Sottotitolo / Data (es. Menu del giorno 12 Ottobre)</label>
                    <input type="text" id="menu-subtitle">
                </div>
                <div class="form-group">
                    <label>Note a piè di pagina (es. Caffè e coperto compresi)</label>
                    <textarea id="menu-notes" rows="3"></textarea>
                </div>
                <button type="submit" class="btn">Salva Impostazioni</button>
                <span id="settings-save-msg" style="margin-left: 10px; color: green; display: none;">Salvato con
                    successo!</span>
            </form>

            <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border-color);">

            <h3>Foto di Sfondo Menu</h3>
            <form id="hero-upload-form" style="margin-top: 1rem;">
                <div class="form-group">
                    <label>Seleziona un'immagine (JPG, PNG)</label>
                    <input type="file" id="hero-image-input" accept="image/*" required>
                </div>
                <button type="submit" class="btn">Carica Immagine</button>
                <span id="upload-save-msg" style="margin-left: 10px; color: green; display: none;">Caricata con
                    successo!</span>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="category-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="category-modal-title">Modifica Categoria</h3>
            <form id="category-form">
                <input type="hidden" id="category-id">
                <div class="form-group">
                    <label>Nome Categoria</label>
                    <input type="text" id="category-name" required>
                </div>
                <div class="form-group">
                    <label>Ordine di Visualizzazione (numero)</label>
                    <input type="number" id="category-sort" value="0">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeModal('category-modal')">Annulla</button>
                    <button type="submit" class="btn">Salva</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Item Modal -->
    <div id="item-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="item-modal-title">Modifica Piatto</h3>
            <form id="item-form">
                <input type="hidden" id="item-id">
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="item-category" required></select>
                </div>
                <div class="form-group">
                    <label>Nome Piatto</label>
                    <input type="text" id="item-name" required>
                </div>
                <div class="form-group">
                    <label>Descrizione</label>
                    <textarea id="item-desc" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Prezzo (€)</label>
                    <input type="number" id="item-price" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Ordine (numero)</label>
                    <input type="number" id="item-sort" value="0">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('item-modal')">Annulla</button>
                    <button type="submit" class="btn">Salva</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/admin.js"></script>
</body>

</html>